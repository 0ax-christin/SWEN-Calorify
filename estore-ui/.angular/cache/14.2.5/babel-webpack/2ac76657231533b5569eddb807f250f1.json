{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"../local-storage.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction ProductSearchComponent_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"routerLink\", \"/user-product-view/\", ctx_r1.username, \"/\", product_r2.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r2.name, \" \");\n  }\n}\n\nexport class ProductSearchComponent {\n  constructor(productService, localStorage) {\n    this.productService = productService;\n    this.localStorage = localStorage;\n    this.searchTerms = new Subject();\n  }\n  /**\n   * Method that handles input from the serach bar\n   * This updates the string saved in this component to constantly update the results\n   * Whenever a {@linkplain User user} inputs another character in the serach box\n   *\n   * @param term The string that is currently being searched for\n   */\n\n\n  search(term) {\n    this.searchTerms.next(term);\n  }\n  /**\n   * Upon initialization this method gets the {@linkplain Product products} that matches this component's search string\n   */\n\n\n  ngOnInit() {\n    this.username = this.localStorage.getUsername();\n    this.products$ = this.searchTerms.pipe( // wait 300ms after each keystroke before considering the term\n    debounceTime(300), // ignore new term if same as previous term\n    distinctUntilChanged(), // switch to new search observable each time the term changes\n    switchMap(term => this.productService.searchProducts(term)));\n  }\n\n}\n\nProductSearchComponent.ɵfac = function ProductSearchComponent_Factory(t) {\n  return new (t || ProductSearchComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.LocalStorageService));\n};\n\nProductSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductSearchComponent,\n  selectors: [[\"app-product-search\"]],\n  inputs: {\n    username: \"username\"\n  },\n  decls: 8,\n  vars: 3,\n  consts: [[\"id\", \"search-component\"], [\"for\", \"search-box\"], [\"id\", \"search-box\", 3, \"input\"], [\"searchBox\", \"\"], [1, \"search-result\"], [4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\"]],\n  template: function ProductSearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"label\", 1);\n      i0.ɵɵtext(2, \"Product Search \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"input\", 2, 3);\n      i0.ɵɵlistener(\"input\", function ProductSearchComponent_Template_input_input_3_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r0 = i0.ɵɵreference(4);\n\n        return i0.ɵɵresetView(ctx.search(_r0.value));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ul\", 4);\n      i0.ɵɵtemplate(6, ProductSearchComponent_li_6_Template, 3, 3, \"li\", 5);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 1, ctx.products$));\n    }\n  },\n  dependencies: [i3.NgForOf, i4.RouterLinkWithHref, i3.AsyncPipe],\n  styles: [\"label[_ngcontent-%COMP%] {\\n  display: block;\\n  font-weight: bold;\\n  font-size: 1.2rem;\\n  margin-top: 1rem;\\n  margin-bottom: 0.5rem;\\n  color: #ff0000;\\n}\\ninput[_ngcontent-%COMP%] {\\n  padding: 0.5rem;\\n  width: 100%;\\n  max-width: 600px;\\n  box-sizing: border-box;\\n  display: block;\\n}\\ninput[_ngcontent-%COMP%]:focus {\\n  outline: #e4e4e4 auto 1px;\\n}\\nli[_ngcontent-%COMP%] {\\n  list-style-type: none;\\n}\\n.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid gray;\\n  border-left: 1px solid gray;\\n  border-right: 1px solid gray;\\n  display: inline-block;\\n  width: 100%;\\n  max-width: 600px;\\n  padding: 0.5rem;\\n  box-sizing: border-box;\\n  text-decoration: none;\\n  background-color: white;\\n  color: #ff0000;\\n}\\n.search-result[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  background-color: #435a60;\\n  color: white;\\n}\\nul.search-result[_ngcontent-%COMP%] {\\n  margin-top: 0;\\n  padding-left: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3Qtc2VhcmNoLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLGNBQWM7QUFDaEI7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixjQUFjO0FBQ2hCO0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7QUFFQTtFQUNFLHFCQUFxQjtBQUN2QjtBQUNBO0VBQ0UsNkJBQTZCO0VBQzdCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLHNCQUFzQjtFQUN0QixxQkFBcUI7RUFDckIsdUJBQXVCO0VBQ3ZCLGNBQWM7QUFDaEI7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7RUFDYixlQUFlO0FBQ2pCIiwiZmlsZSI6InByb2R1Y3Qtc2VhcmNoLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJsYWJlbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgZm9udC1zaXplOiAxLjJyZW07XG4gIG1hcmdpbi10b3A6IDFyZW07XG4gIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgY29sb3I6ICNmZjAwMDA7XG59XG5pbnB1dCB7XG4gIHBhZGRpbmc6IDAuNXJlbTtcbiAgd2lkdGg6IDEwMCU7XG4gIG1heC13aWR0aDogNjAwcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG5pbnB1dDpmb2N1cyB7XG4gIG91dGxpbmU6ICNlNGU0ZTQgYXV0byAxcHg7XG59XG5cbmxpIHtcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xufVxuLnNlYXJjaC1yZXN1bHQgbGkgYSB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xuICBib3JkZXItbGVmdDogMXB4IHNvbGlkIGdyYXk7XG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIGdyYXk7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDEwMCU7XG4gIG1heC13aWR0aDogNjAwcHg7XG4gIHBhZGRpbmc6IDAuNXJlbTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgY29sb3I6ICNmZjAwMDA7XG59XG5cbi5zZWFyY2gtcmVzdWx0IGxpIGE6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDM1YTYwO1xuICBjb2xvcjogd2hpdGU7XG59XG5cbnVsLnNlYXJjaC1yZXN1bHQge1xuICBtYXJnaW4tdG9wOiAwO1xuICBwYWRkaW5nLWxlZnQ6IDA7XG59XG4iXX0= */\"]\n});","map":{"version":3,"mappings":"AAUA,SAAqBA,OAArB,QAAoC,MAApC;AAGA,SACEC,YADF,EACgBC,oBADhB,EACsCC,SADtC,QAEO,gBAFP;;;;;;;;;ICRMC,2BAA+C,CAA/C,EAA+C,GAA/C,EAA+C,CAA/C;IAEIA;IACFA;;;;;;IAFGA;IAAAA;IACDA;IAAAA;;;;ADkBV,OAAM,MAAOC,sBAAP,CAA6B;EAKjCC,YAAoBC,cAApB,EAA4DC,YAA5D,EAA6F;IAAzE;IAAwC;IAHpD,mBAAc,IAAIR,OAAJ,EAAd;EAG0F;EAElG;;;;;;;;;EAOAS,MAAM,CAACC,IAAD,EAAa;IACjB,KAAKC,WAAL,CAAiBC,IAAjB,CAAsBF,IAAtB;EACD;EAED;;;;;EAGAG,QAAQ;IACN,KAAKC,QAAL,GAAgB,KAAKN,YAAL,CAAkBO,WAAlB,EAAhB;IACA,KAAKC,SAAL,GAAiB,KAAKL,WAAL,CAAiBM,IAAjB,EACf;IACAhB,YAAY,CAAC,GAAD,CAFG,EAIf;IACAC,oBAAoB,EALL,EAOf;IACAC,SAAS,CAAEO,IAAD,IAAkB,KAAKH,cAAL,CAAoBW,cAApB,CAAmCR,IAAnC,CAAnB,CARM,CAAjB;EAUD;;AAjCgC;;;mBAAtBL,wBAAsBD;AAAA;;;QAAtBC;EAAsBc;EAAAC;IAAAN;EAAA;EAAAO;EAAAC;EAAAC;EAAAC;IAAA;;;MCxBnCpB,+BAA2B,CAA3B,EAA2B,OAA3B,EAA2B,CAA3B;MAC4BA;MAAeA;MACvCA;MAAkCA;QAAAA;;QAAA;;QAAA,OAASA,qCAAT;MAAgC,CAAhC;MAAlCA;MACAA;MACEA;;MAKFA;;;;MAL0BA;MAAAA","names":["Subject","debounceTime","distinctUntilChanged","switchMap","i0","ProductSearchComponent","constructor","productService","localStorage","search","term","searchTerms","next","ngOnInit","username","getUsername","products$","pipe","searchProducts","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/sohan_saimbhi/team-project-2221-swen-261-600-e-calorify/estore-ui/src/app/product-search/product-search.component.ts","/Users/sohan_saimbhi/team-project-2221-swen-261-600-e-calorify/estore-ui/src/app/product-search/product-search.component.html"],"sourcesContent":["/**\n * SWEN 261\n * product-search.component.ts\n * \n * This is the component that handles the {@linkplain User users} searching for a {@link Product product}\n * \n * Contributors: Team-E\n */\n\nimport { Component, Input, OnInit } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { LocalStorageService } from '../local-storage.service';\n\nimport {\n  debounceTime, distinctUntilChanged, switchMap\n} from 'rxjs/operators';\nimport { Product } from '../product';\nimport { ProductService } from '../product.service';\nimport { User } from '../user';\n\n@Component({\n  selector: 'app-product-search',\n  templateUrl: './product-search.component.html',\n  styleUrls: ['./product-search.component.css']\n})\nexport class ProductSearchComponent implements OnInit {\n  products$!: Observable<Product[]>\n  private searchTerms = new Subject<string>();\n  @Input() username!: string;\n\n  constructor(private productService: ProductService, private localStorage: LocalStorageService) { }\n\n  /**\n   * Method that handles input from the serach bar\n   * This updates the string saved in this component to constantly update the results\n   * Whenever a {@linkplain User user} inputs another character in the serach box\n   * \n   * @param term The string that is currently being searched for\n   */\n  search(term: string): void {\n    this.searchTerms.next(term);\n  }\n\n  /**\n   * Upon initialization this method gets the {@linkplain Product products} that matches this component's search string\n   */\n  ngOnInit(): void {\n    this.username = this.localStorage.getUsername();\n    this.products$ = this.searchTerms.pipe(\n      // wait 300ms after each keystroke before considering the term\n      debounceTime(300),\n\n      // ignore new term if same as previous term\n      distinctUntilChanged(),\n\n      // switch to new search observable each time the term changes\n      switchMap((term: string) => this.productService.searchProducts(term)),\n    );\n  }\n}\n","\n<div id=\"search-component\">\n    <label for=\"search-box\">Product Search </label>\n    <input #searchBox id=\"search-box\" (input)=\"search(searchBox.value)\" />\n    <ul class=\"search-result\">\n      <li *ngFor=\"let product of products$ | async\" >\n        <a routerLink=\"/user-product-view/{{username}}/{{product.id}}\">\n          {{product.name}}\n        </a>\n      </li>\n    </ul>\n  </div>"]},"metadata":{},"sourceType":"module"}